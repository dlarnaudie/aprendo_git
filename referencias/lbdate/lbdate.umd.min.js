/*! == LbDate version: 1.5.0 | Copyright (c) 2020 Leon Bernstein | LbJS | Released under the MIT license == */
/*!
 * MIT License
 *
 * Copyright (c) 2020 Leon Bernstein
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).__lbdateModule={})}(this,(function(t){"use strict";function e(t){return new Date(t)}function n(t){return t instanceof Date}function o(t){return function(t){return t&&"object"==typeof t}(t)&&t._isAMomentObject&&n(t._d)&&function(t){return"function"==typeof t}(t.valueOf)}function r(t){return"number"==typeof t}function i(t){return function(){const e=new Date(this.valueOf());return e.toISOString=t,e}}function u(t){const e=t<0;e&&(t*=-1);const n=t/60,o=(n-n%1).toString(),r=(t%60).toString(),i=t=>1==t.length?"0"+t:t;return`${e||0==t?"+":"-"}${i(o)}:${i(r)}`}function a(t){Date.prototype.toJSON=t}function f(t,e){t&&(a(Date.prototype[t]),delete Date.prototype[t],e(null))}function c(t,e){Date.prototype[t]=e}function l(t){return Math.round(t)}function s(t,e,n,o){return Object.assign(t,e,n,o)}const p={timezone:"Auto",manualTimeZoneOffset:null,toNativeJsonName:"toNativeJSON",precision:3};function m(){return s({},p)}let x={};function d(t){x=t}function g(){return s({},x)}function y(t,e){if(e){const{manualTimeZoneOffset:t,precision:n}=e;r(t)&&(e.manualTimeZoneOffset=l(t)),r(n)&&(e.precision=l(n))}const n=s(m(),g(),e);var o,i;return n.timezone=(o=n.timezone,["Auto","Manual","None","UTC"].includes(o)?o:"Auto"),n.toNativeJsonName=function(t,e){return t!==e&&Date.prototype.hasOwnProperty(e)?m().toNativeJsonName:e}(t,n.toNativeJsonName),n.manualTimeZoneOffset=function(t){if(t){if(t>840)return 840;if(t<-840)return-840}return t}(n.manualTimeZoneOffset),n.precision=(i=n.precision)>3?3:i<0?0:i,n}let O=null;function D(){return O}function h(t){O=t}let N=null,b=null;const S=new Map,w=new Map;function J(t,e,n){if(n)return S.set(n,t),w.set(n,t.prototype.toDate),void(t.prototype.toDate=i(e));N=t,b=N.prototype.toDate,N.prototype.toDate=i(e)}function v(t){if(t){let e=null,n=null;return S.has(t)&&(e=S.get(t),S.delete(t)),void(w.has(t)&&(n=w.get(t),w.delete(t),e&&(e.prototype.toDate=n)))}N&&b&&(N.prototype.toDate=b)}const T=(()=>{const t=t=>{const r=y(D(),t),l=r.toNativeJsonName,s=()=>function(t,n){const{timezone:r,toNativeJsonName:i,manualTimeZoneOffset:a,precision:f}=t,c=6e4,l=0==f?-4:f-3,s=n||Date.prototype.hasOwnProperty(i)?i:Date.prototype.toISOString.name;let p;switch(r){case"Auto":p=function(){const t=this.getTimezoneOffset();let n=e(this.getTime()-t*c)[s]();return n=n.slice(0,-1+l),n+u(t)};break;case"Manual":p=function(){const t=a||0;let n=e(this.getTime()-t*c)[s]();return n=n.slice(0,-1+l),n+u(t)};break;case"None":p=function(){const t=this.getTimezoneOffset();return e(this.getTime()-t*c)[s]().slice(0,-1+l)};break;case"UTC":p=function(){return e(this)[s]().slice(0,-1+l)+"Z"}}return function(){let t=null;return o(this)&&(t=new Date(this.valueOf())),p.call(t||this)}}(r,D());return{init:t=>{f(D(),h),h(l),d(r),c(l,Date.prototype.toJSON);const e=s();a(e),t&&J(t,e)},toJSON:s(),override:t=>{const e=s();return o(t)?t.toDate=i(e):t.toJSON=s(),t},run:(t,e)=>{const n=Date.prototype.toJSON,o=l===D();o||c(l,n);const r=s();a(r);let i=null;e&&(i=function(){let t=(new Date).getTime(),e="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(n=>{let o=16*Math.random();return t>0?(o=(t+o)%16|0,t=Math.floor(t/16)):(o=(e+o)%16|0,e=Math.floor(e/16)),("x"===n?o:3&o|8).toString(16)}))}(),J(e,r,i));let u,f=null;try{u=t()}catch(t){f=t}if(o||delete Date.prototype[l],a(n),i&&e&&v(i),f)throw f;return u},getReplacer:t=>{const r=s();return function(i,u){const a=this[i];if(n(a)){const t=e(a);t.toJSON=r,u=t.toJSON()}else if(o(a)){const t=a.clone();t.toJSON=r,u=t.toJSON()}return t?t.call(this,i,u):u}},restore:()=>{f(D(),h),d({}),v()},getGlobalConfig:()=>g(),getDefaultConfig:()=>m()}},r={init:e=>t().init(e),toJSON:t().toJSON,override:e=>t().override(e),run:(e,n)=>t().run(e,n),getReplacer:e=>t().getReplacer(e),restore:()=>t().restore(),getGlobalConfig:()=>t().getGlobalConfig(),getDefaultConfig:()=>t().getDefaultConfig()};return s(t,r)})();t.default=T,t.lbDate=T,Object.defineProperty(t,"__esModule",{value:!0})})),"object"==typeof window&&(window.lbDate=window.__lbdateModule.lbDate);